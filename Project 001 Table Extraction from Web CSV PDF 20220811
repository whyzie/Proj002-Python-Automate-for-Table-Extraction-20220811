# Table Extraction (Basic for Beginner)
# 1. Web

'''Project #1 Table Extraction - Extract Tables from Websites
Target website https://www.idxchannel.com/market-stock.php 
In the terminal pip instal pandas , in jupiter notebook as in lesson uses !pip instal pandas
pip install jupyter 
1 Extract tables on the website - using pandas'''
import pandas as pd
import lxml

market_stock_072522 = pd.read_html('https://www.idxchannel.com/market-stock')

print(market_stock_072522) # or just type: market_stock_072522
...
[         No.    Code                                       Name  Prev.  Close  \
 0        1.0    AALI                    Astra Agro Lestari Tbk.   9350   9450   
 1        2.0    ABBA                          Mahaka Media Tbk.    278    278   
 2        3.0  ABBA-R                  Right VI Mahaka Media Tbk      0      0   
 3        4.0    ABDA               Asuransi Bina Dana Arta Tbk.   6075   6050   
 4        5.0    ABMM                         ABM Investama Tbk.   2500   2490   
 ...      ...     ...                                        ...    ...    ...   
 1139  1140.0  ZBRA-R               Right II Zebra Nusantara Tbk      0      0   
 1140  1141.0    ZINC                     Kapuas Prima Coal Tbk.     81     82   
 1141  1142.0    ZONE                         Mega Perintis Tbk.   1150   1150   
 1142  1143.0    ZYRX               Zyrexindo Mandiri Buana Tbk.    500    520   
 1143  1144.0  ZYRX-W  Waran Seri I Zyrexindo Mandiri Buana Tbk.     33     35   
 
       Change       %  
 0        100   1.07%  
 1          0   0.00%  
 2          0   0.00%  
 3        -25  -0.41%  
 4        -10  -0.40%  
 ...      ...     ...  
 1139       0   0.00%  
 1140       1   1.23%  
 1141       0   0.00%  
 1142      20   4.00%  
 1143       2   6.06%  
 
 [1144 rows x 7 columns]]...

# 2. CSV

import pandas as pd

df_historical_price210811_220811 = pd.read_csv('https://query1.finance.yahoo.com/v7/finance/download/%5EJKSE?period1=1628687576&period2=1660223576&interval=1d&events=history&includeAdjustedClose=true')
'''
      Date	    Open	       High	       Low	       Close	   Adj Close	 Volume
0	2021-08-12	6092.245117	6139.808105	6051.852051	6139.651855	6139.651855	206955800
1	2021-08-13	6154.051758	6179.895996	6113.263184	6139.492188	6139.492188	163739300
2	2021-08-16	6144.942871	6147.304199	6056.736816	6087.913086	6087.913086	171745600
3	2021-08-18	6109.561035	6136.282227	6040.603027	6118.149902	6118.149902	208983000
4	2021-08-19	6110.549805	6111.012207	5958.043945	5992.321777	5992.321777	214361500
...	...	...	...	...	...	...	...
240	2022-08-05	7057.348145	7090.767090	7045.981934	7084.654785	7084.654785	173887000
241	2022-08-08	7084.654785	7100.808105	7050.824219	7086.849121	7086.849121	219012400
242	2022-08-09	7086.849121	7144.202148	7086.849121	7102.879883	7102.879883	263201500
243	2022-08-10	7102.879883	7104.034180	7021.672852	7086.235840	7086.235840	200438400
244	2022-08-11	7086.275879	7181.100098	7086.275879	7160.384766	7160.384766	0
245 rows × 7 columns'''

df_historical_price210811_220811

'''
	   Date	       Open	       High      	Low	  Close Price adj for splits	Adjusted Close Price for splits&dividen&/cap gain	Volume
0	2021-08-12	6092.245117	6139.808105	6051.852051	6139.651855	                 6139.651855	                               206955800
1	2021-08-13	6154.051758	6179.895996	6113.263184	6139.492188	                 6139.492188	                               163739300
2	2021-08-16	6144.942871	6147.304199	6056.736816	6087.913086	                 6087.913086	                               171745600
3	2021-08-18	6109.561035	6136.282227	6040.603027	6118.149902	                 6118.149902	                               208983000
4	2021-08-19	6110.549805	6111.012207	5958.043945	5992.321777	                 5992.321777	                               214361500
...	...	...	...	...	...	...	...
240	2022-08-05	7057.348145	7090.767090	7045.981934	7084.654785	               7084.654785	                              173887000
241	2022-08-08	7084.654785	7100.808105	7050.824219	7086.849121	               7086.849121	                              219012400
242	2022-08-09	7086.849121	7144.202148	7086.849121	7102.879883	               7102.879883	                              263201500
243	2022-08-10	7102.879883	7104.034180	7021.672852	7086.235840	               7086.235840	                              200438400
244	2022-08-11	7086.275879	7181.100098	7086.275879	7160.384766	               7160.384766	                                  0
245 rows × 7 columns'''


